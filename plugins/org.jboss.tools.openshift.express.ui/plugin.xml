<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.newWizards">
      <category
            id="org.jboss.ide.eclipse.as.openshift.express.ui.wizard.category"
            name="OpenShift">
      </category>
      <wizard
            category="org.jboss.ide.eclipse.as.openshift.express.ui.wizard.category"
            class="org.jboss.tools.openshift.express.internal.ui.wizard.application.NewOpenShiftApplicationWizard"
            icon="icons/openshift-logo-white-icon.png"
            id="org.jboss.ide.eclipse.as.openshift.express.ui.wizard.createNewApplicationWizard"
            name="OpenShift Application"
            project="true">
                <description>Create a new OpenShift Application</description>
      </wizard>
   </extension>
   <extension
          point="org.eclipse.ui.importWizards">
      <category
            id="org.jboss.tools.openshift.express.ui.wizard.importCategory"
            name="OpenShift">
      </category>
      <wizard
            category="org.jboss.tools.openshift.express.ui.wizard.importCategory"
            class="org.jboss.tools.openshift.express.internal.ui.wizard.application.ImportOpenShiftApplicationWizard"
            icon="icons/openshift-logo-white-icon.png"
            id="org.jboss.tools.openshift.express.ui.importExistingApplicationWizard"
            name="Existing OpenShift Application">
            <description>Import an existing OpenShift Application</description>
      </wizard>
    </extension>  
   <extension
		point="org.eclipse.ui.perspectiveExtensions">
		<perspectiveExtension
			targetID="org.jboss.tools.common.ui.JBossPerspective">
			<newWizardShortcut
				id="org.jboss.ide.eclipse.as.openshift.express.ui.wizard.createNewApplicationWizard">
			</newWizardShortcut>
		</perspectiveExtension>
   </extension>
   
   <extension
         point="org.eclipse.wst.server.ui.serverImages">
      <image
            icon="$nl$/icons/openshift-logo-white-icon.png"
            typeIds="org.jboss.tools.openshift.express.openshift.server.type,org.jboss.tools.openshift.express.internal.OpenShiftRuntime"
            id="org.jboss.ide.eclipse.as.ui.jbossIcon"/>
   </extension>
    
	<extension point="org.eclipse.ui.navigator.viewer">
		<viewerContentBinding 
			viewerId="org.eclipse.wst.server.ui.ServersView" />
    	<viewerActionBinding
    		viewerId="org.eclipse.wst.server.ui.ServersView">
			<includes>
				<actionExtension
					pattern="org.jboss.tools.openshift.express.internal.ui.serverviewer.actionDelegate.*"/>
			</includes>
		</viewerActionBinding>
	</extension>
	
	<!-- servers view context menu: OpenShift submenu-->
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.eclipse.wst.server.ui.ServersView?after=org.eclipse.wst.server.ui.internal.cnf.topSectionEnd">
			<menu
				id="org.jboss.tools.openshift.express.serverviewer.openshift"
				label="%openshift.menu.openshift">
				<separator
					name="group.showIn" visible="true"/>
				<separator
					name="group.modify" visible="true"/>
				<separator
					name="additions" visible="true"/>
				<separator
					name="group.edit" visible="true"/>
				<separator
					name="group.properties" visible="true"/>
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false">
								<test
					               forcePluginActivation="true"
					               property="org.jboss.tools.openshift.express.isOpenShiftServer" 
					               value="true">
								</test>
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</menu>
		</menuContribution>
	</extension>	

	<!-- openshift tail files console -->
    <extension
          point="org.eclipse.ui.console.consolePageParticipants">
       <consolePageParticipant
             class="org.jboss.tools.openshift.express.internal.ui.console.TailConsolePageParticipant"
             id="org.jboss.tools.openshift.express.ui.action.tailConsolePageParticipant">
          <enablement>
          		<and>
		         <instanceof
		               value="org.eclipse.ui.console.MessageConsole">
		         </instanceof>
		         <test
		               forcePluginActivation="true"
		               property="org.jboss.tools.openshift.express.isOpenShiftConsole">
		         </test>
		      </and>
          </enablement>
       </consolePageParticipant>
    </extension>
    
    <extension  point="org.eclipse.ui.editors.templates">    
        <template id="org.jboss.tools.maven.editor.xml.templates.profiles.openshift"
         contextTypeId="org.eclipse.m2e.editor.xml.templates.contextType.profiles"
         name="OpenShift profile" 
         description="OpenShift profile">
         <pattern>             &lt;profile&gt;
  &lt;!-- When built in OpenShift the &#39;openshift&#39; profile will be used when invoking mvn. --&gt;
  &lt;!-- Use this profile for any OpenShift specific customization your app will need. --&gt;
  &lt;!-- By default that is to put the resulting archive into the &#39;deployments&#39; folder. --&gt;
  &lt;!-- http://maven.apache.org/guides/mini/guide-building-for-different-environments.html --&gt;
  &lt;id&gt;openshift&lt;/id&gt;
    &lt;build&gt;
      &lt;plugins&gt;
        &lt;plugin&gt;
          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
          &lt;version&gt;2.4&lt;/version&gt;
          &lt;configuration&gt;
            &lt;outputDirectory&gt;deployments&lt;/outputDirectory&gt;
            &lt;warName&gt;ROOT&lt;/warName&gt;
          &lt;/configuration&gt;
        &lt;/plugin&gt;
      &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/profile&gt;</pattern>
       </template>
    </extension>
    <extension
          point="org.eclipse.wst.server.ui.editorPageSections">
       <section
             class="org.jboss.tools.openshift.express.internal.ui.behaviour.OpenShiftServerEditorSection"
             id="org.jboss.tools.openshift.express.ui.behaviour.details.section"
             insertionId="org.eclipse.wst.server.editor.overview.left"
             order="10"
             typeIds="org.jboss.tools.openshift.express.openshift.server.type">
       </section>
    </extension>
    <extension
          point="org.eclipse.wst.server.ui.wizardFragments">
       <fragment
             class="org.jboss.tools.openshift.express.internal.ui.behaviour.OpenShiftServerWizardFragment"
             id="org.jboss.tools.openshift.express.ui.server.fragment"
             typeIds="org.jboss.tools.openshift.express.openshift.server.type">
       </fragment>
    </extension>
   
	<!-- OpenShift Explorer view -->
	<extension
 		point="org.eclipse.ui.views">
		<view
			category="org.jboss.tools.common.model.ui.views"
			class="org.jboss.tools.openshift.express.internal.ui.explorer.OpenShiftExplorerView"
			icon="icons/openshift-logo-white-icon.png"
			id="org.jboss.tools.openshift.express.ui.explorer.expressConsoleView"
			name="OpenShift Explorer">
		</view>
	</extension>

	<extension point="org.eclipse.ui.navigator.viewer">
		<viewer
			viewerId="org.jboss.tools.openshift.express.ui.explorer.expressConsoleView">
			<!-- openshift explorer context menu -->
			<popupMenu
				allowsPlatformContributions="true"
				id="org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup">
				<insertionPoint
					name="group.new"
					separator="true"/>
				<insertionPoint
					name="group.showIn"
					separator="true"/>
				<insertionPoint
					name="group.edit"
					separator="true"/>
				<insertionPoint
					name="group.import"
					separator="true"/>
				<insertionPoint
					name="group.modify"
					separator="true"/>
				<insertionPoint
					name="additions"
					separator="true"/>
				<insertionPoint
					name="group.properties"
					separator="true"/>
			</popupMenu>
			<options>
				<property
					name="org.eclipse.ui.navigator.hideLinkWithEditorAction"
					value="true">
				</property>
			</options>
		</viewer>
		<viewerActionBinding
			viewerId="org.jboss.tools.openshift.express.ui.explorer.expressConsoleView">
			<includes>
				<actionExtension
					pattern="org.jboss.tools.openshift.express.internal.ui.explorer.actionProvider.*"/>
			</includes>
		</viewerActionBinding>
		<viewerContentBinding
			viewerId="org.jboss.tools.openshift.express.ui.explorer.expressConsoleView">
			<includes>
				<contentExtension
					isRoot="false"
					pattern="org.jboss.tools.openshift.express.ui.explorer.expressConsoleContent">
				</contentExtension>
			</includes>
		</viewerContentBinding>
	</extension>
	<extension
		point="org.eclipse.ui.navigator.navigatorContent">
		<navigatorContent
			contentProvider="org.jboss.tools.openshift.express.internal.ui.explorer.OpenShiftExplorerContentProvider"
			id="org.jboss.tools.openshift.express.ui.explorer.expressConsoleContent"
			labelProvider="org.jboss.tools.openshift.express.internal.ui.explorer.OpenShiftExplorerLabelProvider"
			name="OpenShift Explorer Content">
			<triggerPoints></triggerPoints>
		</navigatorContent>
	</extension>

	<!-- Select Application Dialog common navigator -->
	<extension point="org.eclipse.ui.navigator.viewer">
		<viewer
			viewerId="org.jboss.tools.openshift.express.internal.ui.wizard.application.SelectApplicationWizardPage">
		</viewer>
		<viewerContentBinding
				viewerId="org.jboss.tools.openshift.express.internal.ui.wizard.application.SelectApplicationWizardPage">
			<includes>
				<contentExtension
					pattern="org.jboss.tools.openshift.express.internal.ui.wizard.application.SelectApplicationWizardPageContent"
					isRoot="false">
				</contentExtension>
			</includes>
		</viewerContentBinding>
	</extension>
	<extension point="org.eclipse.ui.navigator.navigatorContent">
		<navigatorContent
			id="org.jboss.tools.openshift.express.internal.ui.wizard.application.SelectApplicationWizardPageContent"
			name="Select Application Dialog Content"
			contentProvider="org.jboss.tools.openshift.express.internal.ui.explorer.OpenShiftExplorerContentProvider"
			labelProvider="org.jboss.tools.openshift.express.internal.ui.explorer.OpenShiftExplorerLabelProvider">
			<triggerPoints></triggerPoints>
		</navigatorContent>
	</extension>

	<!-- openshift explorer: "New" submenu -->
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.new">
	    	<menu
	           id="org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.new"
	           label="%openshift.menu.expressConsoleView.new">
			</menu>
		</menuContribution>
	</extension>

	<!-- openshift explorer: "Show In" submenu -->
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.showIn">
	    	<menu
	           id="org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.showIn"
	           label="%openshift.menu.expressConsoleView.showIn">
			</menu>
		</menuContribution>
	</extension>

	<!-- New Connection -->
	<extension
		point="org.eclipse.ui.commands">
		<command
              id="org.jboss.tools.openshift.express.ui.command.newconnection"
              name="%openshift.command.connection.new">
        </command>
	</extension>
    <extension
		point="org.eclipse.ui.handlers">
		<handler
              commandId="org.jboss.tools.openshift.express.ui.command.newconnection"
              class="org.jboss.tools.openshift.express.internal.ui.command.NewConnectionHandler">
     	</handler>
	</extension>
    <extension
        point="org.eclipse.ui.menus">
		<!-- openshift explorer context menu: new connection -->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.new?after=additions">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.newconnection"
                icon="icons/openshift-new.png"
                id="org.jboss.tools.openshift.express.ui.command.newconnection"
                mnemonic="N">
				<visibleWhen>
					<or>
						<with variable="activePartId">
							<equals value="org.jboss.tools.openshift.express.ui.explorer.expressConsoleView" />
						</with>
					</or>
				</visibleWhen>
			</command>
		</menuContribution>
		<!-- openshift explorer toolbar: new connection -->
		<menuContribution
			locationURI="toolbar:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView">
				<command
					commandId="org.jboss.tools.openshift.express.ui.command.newconnection"
					icon="icons/openshift-new.png"
					id="org.jboss.tools.openshift.express.ui.command.newconnection"
					style="push"
					mnemonic="N">
				</command>
		</menuContribution>
	</extension>
		
	<!-- Edit Connection -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.editconnection"
			name="%openshift.command.connection.edit">
		</command>
	</extension>
	<extension
		point="org.eclipse.ui.handlers">
		<handler
			class="org.jboss.tools.openshift.express.internal.ui.command.EditConnectionHandler"
			commandId="org.jboss.tools.openshift.express.ui.command.editconnection">
		</handler>
	</extension>
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?before=group.showIn">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.editconnection"
				icon="icons/openshift-edit.png"
				mnemonic="E">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.jboss.tools.openshift.express.internal.core.connection.Connection" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
	</extension>
	
	<!-- Remove Connection -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.removeconnection"
			name="%openshift.command.connection.remove">
		</command>
	</extension>
	<extension
		point="org.eclipse.ui.handlers">
        <handler
			commandId="org.jboss.tools.openshift.express.ui.command.removeconnection"
			class="org.jboss.tools.openshift.express.internal.ui.command.RemoveConnectionHandler">
     	</handler>
	</extension>
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?before=group.showIn">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.removeconnection"
				icon="icons/delete_edit.gif"
				id="org.jboss.tools.openshift.express.ui.command.removeconnection"
				mnemonic="R">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="and">
								<instanceof
									value="org.jboss.tools.openshift.express.internal.core.connection.Connection" />
	                    </iterate>
					</and>
                </with>
			</visibleWhen>
          </command>
        </menuContribution>
    </extension>
    
	<!-- Refresh OpenShift resource (connection, domain, application) -->
     <extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.refreshresource"
              name="%openshift.command.refreshresource">
        </command>
     </extension>
     <extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.refreshresource"
              class="org.jboss.tools.openshift.express.internal.ui.command.RefreshResourceHandler">
     	</handler>
     </extension>
     <extension
           point="org.eclipse.ui.menus">
        <menuContribution
              locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.modify">
          <command
                commandId="org.jboss.tools.openshift.express.ui.command.refreshresource"
                icon="icons/refresh.gif"
                id="org.jboss.tools.openshift.express.ui.command.refreshresource"
                mnemonic="R">
			<visibleWhen>
				<and>
	                <count
						value="1">
	                </count>
	                <iterate
						ifEmpty="false"
						operator="and">
			              <or>
			                 <instanceof
			                       value="org.jboss.tools.openshift.express.internal.core.connection.Connection" />
			                 <instanceof
			                       value="com.openshift.client.IOpenShiftResource" />
			              </or>
	                </iterate>
				</and>
			</visibleWhen>
          </command>
        </menuContribution>
    </extension>
    
    	<!-- restart application -->
	<extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.restartApplication"
              name="%openshift.command.application.restart">
        </command>
     </extension>
     <extension
           point="org.eclipse.ui.handlers">
        <handler
			class="org.jboss.tools.openshift.express.internal.ui.command.RestartApplicationHandler"
			commandId="org.jboss.tools.openshift.express.ui.command.restartApplication">
		</handler>
	</extension>
	<!-- openshift explorer: restart application -->
    <extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.restartApplication"
				icon="icons/arrow_rotate_clockwise_red.png"
				id="org.jboss.tools.openshift.express.ui.command.restartApplication"
				mnemonic="R">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
		<!-- servers view: restart application -->
		<menuContribution
       		locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.restartApplication"
				icon="icons/arrow_rotate_clockwise_red.png"
				id="org.jboss.tools.openshift.express.ui.command.restartApplication"
				mnemonic="C">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
        	</command>
		</menuContribution>
	</extension>
    
   	<!-- manage keys -->
     <extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.manageKeys"
              name="%openshift.command.managekeys">
        </command>
     </extension>
     <extension
           point="org.eclipse.ui.handlers">
        <handler
              class="org.jboss.tools.openshift.express.internal.ui.command.ManageSSHKeysHandler"
              commandId="org.jboss.tools.openshift.express.ui.command.manageKeys">
        </handler>
     </extension>
	<!-- openshift explorer: manage keys -->
    <extension
           point="org.eclipse.ui.menus">
        <menuContribution
              locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.showIn">
          <command
                commandId="org.jboss.tools.openshift.express.ui.command.manageKeys"
                icon="icons/key-icon.png"
                id="org.jboss.tools.openshift.express.ui.command.manageKeys"
                mnemonic="K">
              <visibleWhen>
				<with variable="selection">
					<and>
						<count value="1" />
	         			<iterate ifEmpty="false" operator="or">
	            			<instanceof
	                       		value="org.jboss.tools.openshift.express.internal.core.connection.Connection" />
	                    </iterate>
					</and>
                </with>
              </visibleWhen>
          </command>
        </menuContribution>
	</extension>
	
    <!-- Manage domains -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.manageDomains"
			name="%openshift.command.domain.manage">
		</command>
	</extension>
	<extension
           point="org.eclipse.ui.handlers">
        <handler
              class="org.jboss.tools.openshift.express.internal.ui.command.ManageDomainsHandler"
              commandId="org.jboss.tools.openshift.express.ui.command.manageDomains">
     	</handler>
	</extension>
	<!-- openshift explorer: manage domains -->
	<extension
           point="org.eclipse.ui.menus">
        <menuContribution
              locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.showIn">
          <command
                commandId="org.jboss.tools.openshift.express.ui.command.manageDomains"
                icon="icons/globe.png"
                mnemonic="M">
              <visibleWhen>
				<with variable="selection">
					<and>
						<count value="1" />
	         			<iterate ifEmpty="false" operator="or">
	            			<instanceof
	                       		value="org.jboss.tools.openshift.express.internal.core.connection.Connection" />
	                    </iterate>
					</and>
                </with>
              </visibleWhen>
          </command>
        </menuContribution>
	</extension>
	
	<!-- New Domain -->
	<extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.newdomain"
              name="%openshift.command.domain.new">
        </command>
	</extension>
	<extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.newdomain"
              class="org.jboss.tools.openshift.express.internal.ui.command.NewDomainHandler">
     	</handler>
	</extension>
	<!-- openshift explorer: new domain -->
	<extension
           point="org.eclipse.ui.menus">
        <menuContribution
              locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.new?after=additions">
          <command
                commandId="org.jboss.tools.openshift.express.ui.command.newdomain"
                icon="icons/globe_new.png"
                id="org.jboss.tools.openshift.express.ui.command.newdomain"
                mnemonic="D">
          </command>
        </menuContribution>
	</extension>

	<!-- Edit Domain -->
	<extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.editdomain"
              name="%openshift.command.domain.edit">
        </command>
     </extension>
     <extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.editdomain"
              class="org.jboss.tools.openshift.express.internal.ui.command.EditDomainHandler">
     	</handler>
     </extension>
     <!-- openshift explorer: edit domain -->
     <extension
           point="org.eclipse.ui.menus">
        <menuContribution
              locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?before=group.modify">
          <command
                commandId="org.jboss.tools.openshift.express.ui.command.editdomain"
                icon="icons/globe_edit.png"
                id="org.jboss.tools.openshift.express.ui.command.editdomain"
                mnemonic="E">
           <visibleWhen>
             <with
                   variable="selection">
                <count
                      value="1">
                </count>
                <iterate
                      ifEmpty="false"
                      operator="and">
                 <instanceof
                       value="com.openshift.client.IDomain" />
                </iterate>
             </with>
           </visibleWhen>
          </command>
        </menuContribution>
    </extension>

	<!-- Delete Domain -->
	<extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.deletedomain"
              name="%openshift.command.domain.delete">
        </command>
	</extension>
	<extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.deletedomain"
              class="org.jboss.tools.openshift.express.internal.ui.command.DeleteDomainHandler">
     	</handler>
	</extension>
	<!-- openshift explorer: delete domain -->
	<extension
           point="org.eclipse.ui.menus">
        <menuContribution
              locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?before=group.edit">
          <command
                commandId="org.jboss.tools.openshift.express.ui.command.deletedomain"
                icon="icons/globe_delete.png"
                id="org.jboss.tools.openshift.express.ui.command.deletedomain"
                mnemonic="D">
           <visibleWhen>
             <with
                   variable="selection">
                <count
                      value="1">
                </count>
                <iterate
                      ifEmpty="false"
                      operator="and">
                 <instanceof
                       value="com.openshift.client.IDomain" />
                </iterate>
             </with>
           </visibleWhen>
          </command>
        </menuContribution>
    </extension>
    
    <!-- New Application -->
    <extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.newapplication"
              name="%openshift.command.application.new">
        </command>
    </extension>
    <extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.newapplication"
              class="org.jboss.tools.openshift.express.internal.ui.command.NewApplicationHandler">
     	</handler>
    </extension>
	<!-- openshift explorer: new application -->
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.new?after=additions">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.newapplication"
				icon="icons/query-new.gif"
				id="org.jboss.tools.openshift.express.ui.command.newapplication"
				mnemonic="A">
				<visibleWhen>
					<with
						variable="selection">
						<count
		                      value="1" />
		                <or>
							<iterate
								ifEmpty="false"
								operator="and">
								<instanceof
									value="org.jboss.tools.openshift.express.internal.core.connection.Connection" />
							</iterate>
							<iterate
								ifEmpty="false"
								operator="and">
								<instanceof
									value="com.openshift.client.IDomain" />
							</iterate>
							<iterate
								ifEmpty="false"
								operator="and">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
							<iterate
								ifEmpty="false"
								operator="and">
								<instanceof
									value="com.openshift.client.cartridge.IEmbeddableCartridge" />
							</iterate>
						</or>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
    </extension>

    <!-- Import Application -->
    <extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.importapplication"
              name="%openshift.command.application.import">
        </command>
    </extension>
    <extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.importapplication"
              class="org.jboss.tools.openshift.express.internal.ui.command.ImportApplicationHandler">
     	</handler>
    </extension>
	<!-- openshift explorer: import application -->
    <extension
           point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.import">
				<command
                	commandId="org.jboss.tools.openshift.express.ui.command.importapplication"
                	icon="icons/application_import.gif"
                	id="org.jboss.tools.openshift.express.ui.command.importapplication"
                	mnemonic="A">
					<visibleWhen>
						<with
							variable="selection">
							<count value="1"/>
							<iterate
								ifEmpty="false"
								operator="and">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</with>
					</visibleWhen>
			</command>
		</menuContribution>
	</extension>
	
	<!-- Delete Application(s) -->
	<extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.deleteApplications"
              name="%openshift.command.application.delete">
        </command>
	</extension>
	<extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.deleteApplications"
              class="org.jboss.tools.openshift.express.internal.ui.command.DeleteApplicationHandler">
     	</handler>
	</extension>
	<!-- openshift explorer: delete application -->
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.edit">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.deleteApplications"
				icon="icons/application_delete.gif"
				id="org.jboss.tools.openshift.express.ui.command.deleteApplications"
				mnemonic="D">
				<visibleWhen>
					<with
					variable="selection">
						<iterate
							ifEmpty="false"
							operator="or">
							<instanceof
								value="com.openshift.client.IApplication" />
						</iterate>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
    </extension>
    <!-- servers view: delete application -->
    <extension
           point="org.eclipse.ui.menus">
        <menuContribution
              locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.edit">
          <command
                commandId="org.jboss.tools.openshift.express.ui.command.deleteApplications"
                icon="icons/application_delete.gif"
                id="org.jboss.tools.openshift.express.ui.command.deleteapplication"
                mnemonic="D">
          </command>
        </menuContribution>
	</extension>
    
        <!-- Open In Browser -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.openInBrowser"
			name="%openshift.command.application.openInBrowser">
		</command>
	</extension>
	<extension
		point="org.eclipse.ui.handlers">
		<handler
              commandId="org.jboss.tools.openshift.express.ui.command.openInBrowser"
              class="org.jboss.tools.openshift.express.internal.ui.command.OpenInWebBrowserHandler">
    	</handler>
	</extension>
	<extension
		point="org.eclipse.ui.menus">
		<!-- openshift explorer: open in browser -->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.showIn">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.openInBrowser"
				icon="icons/open-browser.gif"
				id="org.jboss.tools.openshift.express.ui.explorer.command.openInBrowser"
				mnemonic="B">
				<visibleWhen>
					<with
						variable="selection">
						<and>
							<count
								value="1">
							</count>
			                <iterate
								ifEmpty="false"
								operator="or">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
        </menuContribution>
    </extension>
    
    <!-- Edit embedded cartridges -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.editcartridges"
			name="%openshift.command.application.editcartridges">
		</command>
	</extension>
	<extension
		point="org.eclipse.ui.handlers">
		<handler
              commandId="org.jboss.tools.openshift.express.ui.command.editcartridges"
              class="org.jboss.tools.openshift.express.internal.ui.command.EditCartridgesHandler">
    	</handler>
	</extension>
     <extension
           point="org.eclipse.ui.menus">
		<!-- openshift explorer: edit embedded cartridges -->
        <menuContribution
              locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.modify">
          <command
                commandId="org.jboss.tools.openshift.express.ui.command.editcartridges"
                icon="icons/cartridges-edit.gif"
                id="org.jboss.tools.openshift.express.ui.command.editcartridges"
                mnemonic="C">
           <visibleWhen>
             <with
                   variable="selection">
				<or>
					<and>
		                <count
							value="1">
		                </count>
		                <iterate
							ifEmpty="false"
							operator="and">
							<instanceof
								value="com.openshift.client.IApplication" />
		                </iterate>
		            </and>
					<and>
		                <count
							value="+">
		                </count>
		                <iterate
							ifEmpty="false"
							operator="and">
							<instanceof
								value="com.openshift.client.cartridge.IEmbeddedCartridge" />
						</iterate>
					</and>
                </or>
             </with>
           </visibleWhen>
          </command>
        </menuContribution>
		<!-- servers view: edit embedded cartridges -->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.editcartridges"
				icon="icons/cartridges-edit.gif"
				id="org.jboss.tools.openshift.express.ui.command.editcartridges"
				mnemonic="C">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
    </extension>
     
    <!-- Edit environment variables -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.editEnvitonmentVars"
			name="%openshift.command.application.envvars">
		</command>
	</extension>
	<extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.editEnvitonmentVars"
              class="org.jboss.tools.openshift.express.internal.ui.command.EditEnvironmentVariablesHandler">
     	</handler>
	</extension>
	<!-- openshift explorer: edit environment variables -->
	<extension
           point="org.eclipse.ui.menus">
        <menuContribution
              locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.modify">
          <command
                commandId="org.jboss.tools.openshift.express.ui.command.editEnvitonmentVars"
                icon="icons/task_edit.gif"
                id="org.jboss.tools.openshift.express.ui.command.editEnvironmentVars"
                mnemonic="E">
           <visibleWhen>
             <with
                   variable="selection">
				<or>
					<and>
		                <count
							value="1">
		                </count>
		                <iterate
							ifEmpty="false"
							operator="and">
							<instanceof
								value="com.openshift.client.IApplication" />
		                </iterate>
		            </and>
                </or>
             </with>
           </visibleWhen>
          </command>
        </menuContribution>
		<!-- servers view: edit environment variables-->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.editEnvitonmentVars"
				icon="icons/task_edit.gif"
				id="org.jboss.tools.openshift.express.ui.command.editEnvironmentVars"
				mnemonic="E">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
	</extension>

	<!-- show environment variables -->
    <extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.listAllEnvironmentVariables"
              name="%openshift.command.application.listAllEnvironmentVariables">
        </command>
    </extension>
    <extension
           point="org.eclipse.ui.handlers">
        <handler
              class="org.jboss.tools.openshift.express.internal.ui.command.ListAllEnvironmentVariablesHandler"
              commandId="org.jboss.tools.openshift.express.ui.command.listAllEnvironmentVariables">
        </handler>
    </extension>
	<!-- openshift explorer: show environment variables -->
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.listAllEnvironmentVariables"
				icon="icons/task.gif"
				id="org.jboss.tools.openshift.express.ui.command.listAllEnvironmentVariables"
				mnemonic="E">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
		<!-- servers view: show environment variables -->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.listAllEnvironmentVariables"
				icon="icons/task.gif"
				id="org.jboss.tools.openshift.express.ui.command.listAllEnvironmentVariables"
				mnemonic="E">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
	</extension>
	
    <!-- Tail files -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.tailfiles"
			name="%openshift.command.application.tailfiles">
		</command>
	</extension>
	<extension
		point="org.eclipse.ui.handlers">
		<handler
              commandId="org.jboss.tools.openshift.express.ui.command.tailfiles"
              class="org.jboss.tools.openshift.express.internal.ui.command.TailFilesHandler">
    	</handler>
	</extension>
	<extension
		point="org.eclipse.ui.menus">
		<!-- openshift explorer: tail files -->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.tailfiles"
				icon="icons/console_view.gif"
				id="org.jboss.tools.openshift.express.ui.explorer.command.tailfiles"
				mnemonic="T">
				<visibleWhen>
					<with
						variable="selection">
						<and>
							<count
								value="1">
							</count>
			                <iterate
								ifEmpty="false"
								operator="and">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
        </menuContribution>
		<!-- servers view: tail files -->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.tailfiles"
				icon="icons/console_view.gif"
				id="org.jboss.tools.openshift.express.ui.servers.command.tailfiles"
				mnemonic="T">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
    </extension>

    <!-- Port Forwarding -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.portforwarding"
			name="%openshift.command.application.portforwarding">
		</command>
	</extension>
	<extension
		point="org.eclipse.ui.handlers">
		<handler
              commandId="org.jboss.tools.openshift.express.ui.command.portforwarding"
              class="org.jboss.tools.openshift.express.internal.ui.command.PortForwardingHandler">
    	</handler>
	</extension>
	<extension
		point="org.eclipse.ui.menus">
		<!-- openshift explorer: port forwarding -->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.portforwarding"
				icon="icons/connector.png"
				id="org.jboss.tools.openshift.express.ui.explorer.command.portforwarding"
				mnemonic="P">
				<visibleWhen>
					<with
						variable="selection">
						<and>
							<count
								value="1">
							</count>
			                <iterate
								ifEmpty="false"
								operator="and">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
        </menuContribution>
		<!-- servers view: port forwarding -->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.portforwarding"
				icon="icons/connector.png"
				id="org.jboss.tools.openshift.express.ui.servers.command.portforwarding"
				mnemonic="P">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
    </extension>

	<!-- application details -->
    <extension
          point="org.eclipse.ui.commands">
       <command
             id="org.jboss.tools.openshift.express.ui.command.applicationDetails"
             name="%openshift.command.application.details">
       </command>
    </extension>
    <extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.applicationDetails"
              class="org.jboss.tools.openshift.express.internal.ui.command.ApplicationDetailsHandler">
     	</handler>
    </extension>
	<!-- openshift explorer: application details -->
    <extension
           point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.properties">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.applicationDetails"
				icon="icons/magnifying-glass.png"
				id="org.jboss.tools.openshift.express.ui.command.applicationDetails"
				mnemonic="D">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="and">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
		<!-- servers view: application details -->
		<menuContribution
				locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.properties">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.applicationDetails"
				icon="icons/magnifying-glass.png"
				id="org.jboss.tools.openshift.express.ui.command.applicationDetails"
				mnemonic="D">
			<visibleWhen>
				<with variable="selection">
					<and>
						<count value="1" />
						<iterate ifEmpty="false" operator="or">
							<instanceof
								value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
	</extension>
	
	<!-- domain, connection, cartridge properties -->
    <extension
          point="org.eclipse.ui.commands">
       <command
             id="org.jboss.tools.openshift.express.ui.command.showProperties"
             name="%openshift.command.resource.properties.show">
       </command>
    </extension>
    <extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.showProperties"
              class="org.jboss.tools.openshift.express.internal.ui.command.ShowPropertiesHandler">
     	</handler>
    </extension>
	<!-- openshift explorer: properties -->
    <extension
           point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.properties">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.showProperties"
				id="org.jboss.tools.openshift.express.ui.command.showProperties"
				mnemonic="P">
				<visibleWhen>
					<with
						variable="selection">
							<count
								value="1" />
						<iterate
							ifEmpty="false"
							operator="and">
							<or>
								<instanceof
									value="org.jboss.tools.openshift.express.internal.core.connection.Connection" />
								<instanceof
									value="com.openshift.client.IDomain" />
								<instanceof
									value="com.openshift.client.cartridge.IEmbeddedCartridge" />
							</or>
						</iterate>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
	</extension>

	<!-- New Server Adapter -->
    <extension
          point="org.eclipse.ui.commands">
       <command
             id="org.jboss.tools.openshift.express.ui.command.newServerAdapter"
             name="%openshift.command.application.serverAdapter.new">
       </command>
    </extension>
    <extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.newServerAdapter"
              class="org.jboss.tools.openshift.express.internal.ui.command.NewServerAdapterHandler">
     	</handler>
    </extension>
	<!-- openshift explorer: application details -->
    <extension
           point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.new">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.newServerAdapter"
				icon="icons/server_new.png"
				id="org.jboss.tools.openshift.express.ui.command.newServerAdapter"
				mnemonic="D">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="and">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
	</extension>
	
	
	<!-- configure markers -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.configureMarkers"
			name="%openshift.command.configureMarkers">
		</command>
	</extension>
	<extension
		point="org.eclipse.ui.handlers">
		<handler
			class="org.jboss.tools.openshift.express.internal.ui.command.ConfigureMarkersHandler"
			commandId="org.jboss.tools.openshift.express.ui.command.configureMarkers">
		</handler>
	</extension>
	<!-- project explorer: configure markers -->
	<extension point="org.eclipse.ui.menus">
		<menuContribution
    		locationURI="popup:org.eclipse.ui.navigator.ProjectExplorer#PopupMenu?after=additions">
    		<menu
				id="org.jboss.tools.openshift.express.ui.projectExplorerPopup"
				label="%openshift.menu.openshift">
				<visibleWhen 
					checkEnabled="false">
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false">
								<test
			       					forcePluginActivation="true"
			       					property="org.jboss.tools.openshift.express.isOpenShiftProject" value="true"/>
			        		</iterate>
						</and>
					</with>
				</visibleWhen>
			</menu>
		</menuContribution>
    	<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.projectExplorerPopup"> 
			<command
			    commandId="org.jboss.tools.openshift.express.ui.command.configureMarkers"
				icon="icons/marker16.png"
				id="org.jboss.tools.openshift.express.ui.command.configureMarkers"
				mnemonic="M">
			</command>
		</menuContribution>
		<!-- package explorer: configure markers -->
		<menuContribution
	   		locationURI="popup:org.eclipse.jdt.ui.PackageExplorer?after=additions">
	   		<menu
			    id="org.jboss.tools.openshift.express.ui.packageExplorerPopup"
	    	    label="%openshift.menu.openshift">
	    	    <visibleWhen 
					checkEnabled="false">
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false">
								<adapt
        	      					type="org.eclipse.core.resources.IProject">
			 						<test
		 								forcePluginActivation="true"
					   					property="org.jboss.tools.openshift.express.isOpenShiftProject" value="true"/>
								</adapt>
			        		</iterate>
						</and>
					</with>
				</visibleWhen>
			</menu>
		</menuContribution>
    	<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.packageExplorerPopup"> 
			<command
			    commandId="org.jboss.tools.openshift.express.ui.command.configureMarkers"
		    	icon="icons/marker16.png"
		    	id="org.jboss.tools.openshift.express.ui.command.configureMarkers"
		    	mnemonic="M">
			</command>
		</menuContribution>
		<!-- resource navigator: configure markers -->
		<menuContribution
			locationURI="popup:org.eclipse.ui.views.ResourceNavigator">
			<menu
				id="org.jboss.tools.openshift.express.ui.resourceNavigatorPopup"
	        	label="%openshift.menu.openshift">
				<visibleWhen 
					checkEnabled="false">
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false">
								<adapt
            						type="org.eclipse.core.resources.IProject">
		 							<test
		 								forcePluginActivation="true"
			    	       				property="org.jboss.tools.openshift.express.isOpenShiftProject" value="true"/>
								</adapt>
			           		</iterate>
						</and>
					</with>
				</visibleWhen>
			</menu>
		</menuContribution>
    	<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.resourceNavigatorPopup"> 
			<command
			    commandId="org.jboss.tools.openshift.express.ui.command.configureMarkers"
			    icon="icons/marker16.png"
			    id="org.jboss.tools.openshift.express.ui.command.configureMarkers"
			    mnemonic="M">
			</command>
		</menuContribution>
	</extension>

	<!-- configure OpenShift application -->
	<!-- project explorer: configure OpenShift application -->
	<extension point="org.eclipse.ui.menus">
		<menuContribution
    		locationURI="popup:org.eclipse.ui.projectConfigure?after=additions">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.newapplication"
				icon="icons/openshift-new.png"
				label="%openshift.menu.configureNewOpenShiftApplication"
				id="org.jboss.tools.openshift.express.ui.command.newapplication"
				mnemonic="A">
				<visibleWhen 
					checkEnabled="false">
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false">
								<adapt
            						type="org.eclipse.core.resources.IProject">
									<and>
			 							<test
			 								forcePluginActivation="true"
				    	       				property="org.jboss.tools.openshift.express.isOpenShiftProject" value="false"/>			 							
				    	       			<test
			 								forcePluginActivation="true"
				    	       				property="org.jboss.tools.openshift.express.ifSharedIsEGit" value="true"/>
				    	       			<test
			 								forcePluginActivation="true"
				    	       				property="org.jboss.tools.openshift.express.isInternalRSE" value="false"/>
				    	       		</and>
								</adapt>
			           		</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
	</extension>
  
    <!-- adapters -->
     <extension
           point="org.eclipse.core.runtime.adapters">
        <factory
              adaptableType="org.jboss.tools.openshift.express.internal.core.connection.Connection"
              class="org.jboss.tools.openshift.express.internal.ui.property.PropertySourceAdapterFactory">
           <adapter
                 type="org.eclipse.ui.views.properties.IPropertySource">
           </adapter>
        </factory>
        <factory
              adaptableType="com.openshift.client.IApplication"
              class="org.jboss.tools.openshift.express.internal.ui.property.PropertySourceAdapterFactory">
           <adapter
                 type="org.eclipse.ui.views.properties.IPropertySource">
           </adapter>
        </factory>
        <factory
              adaptableType="com.openshift.client.cartridge.IEmbeddedCartridge"
              class="org.jboss.tools.openshift.express.internal.ui.property.PropertySourceAdapterFactory">
           <adapter
                 type="org.eclipse.ui.views.properties.IPropertySource">
           </adapter>
        </factory>
        <factory
              adaptableType="com.openshift.client.IDomain"
              class="org.jboss.tools.openshift.express.internal.ui.property.PropertySourceAdapterFactory">
           <adapter
                 type="org.eclipse.ui.views.properties.IPropertySource">
           </adapter>
        </factory>
     </extension>
     <extension
         point="org.eclipse.ui.perspectiveExtensions">
      	<perspectiveExtension
            targetID="org.jboss.tools.common.ui.JBossPerspective">
            <view relative="org.eclipse.ui.views.ProblemView"
         	   relationship="stack"
               id="org.jboss.tools.openshift.express.ui.explorer.expressConsoleView">
         </view>
      	</perspectiveExtension> 
	</extension>
	
	<!-- property testers -->
	<extension
		point="org.eclipse.core.expressions.propertyTesters">
		<propertyTester
			class="org.jboss.tools.openshift.express.internal.ui.propertytester.ServerTypePropertyTester"
			id="org.jboss.tools.openshift.express.ui.serverTypePropertyTester"
			namespace="org.jboss.tools.openshift.express"
			properties="isOpenShiftServer"
			type="org.eclipse.wst.server.core.IServer">
		</propertyTester>
		<propertyTester
			class="org.jboss.tools.openshift.express.internal.ui.propertytester.ConsoleTypePropertyTester"
			id="org.jboss.tools.openshift.express.ui.consoleTypePropertyTester"
			namespace="org.jboss.tools.openshift.express"
			properties="isOpenShiftConsole"
			type="org.eclipse.ui.console.MessageConsole">
		</propertyTester>
		<propertyTester
			class="org.jboss.tools.openshift.express.internal.ui.propertytester.OpenShiftProjectPropertyTester"
			id="org.jboss.tools.openshift.express.ui.openshiftProjectPropertyTester"
			namespace="org.jboss.tools.openshift.express"
			properties="isOpenShiftProject"
			type="org.eclipse.core.resources.IProject">
		</propertyTester>
		<propertyTester
			class="org.jboss.tools.openshift.express.internal.ui.propertytester.ProjectPropertyTester"
			id="org.jboss.tools.openshift.express.ui.projectPropertyTester"
			namespace="org.jboss.tools.openshift.express"
			properties="ifSharedIsEGit,isInternalRSE"
			type="org.eclipse.core.resources.IProject">
		</propertyTester>
	</extension>
	
	<!-- preferences page -->
	<extension
		point="org.eclipse.ui.preferencePages">
		<page
			class="org.jboss.tools.openshift.express.internal.ui.preferences.OpenShiftPreferencePage"
			id="org.jboss.tools.openshift.express.ui.preferences.OpenShiftPreferencePage"
			name="%openshift.preferences.page.title"
			category="org.jboss.tools.common.model.ui.MainPreferencePage">
		</page>
	</extension>
</plugin>
