<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
	<extension
			point="org.jboss.tools.openshift.express.core.ui.egit">
		<egitui
			class="org.jboss.tools.openshift.express.internal.ui.server.EGitUI">
		</egitui>
	</extension>
	
	<!-- new wizard: new application -->
	<extension
		point="org.eclipse.ui.newWizards">
		<category
			id="org.jboss.ide.eclipse.as.openshift.express.ui.wizard.category"
			name="OpenShift">
		</category>
		<wizard
			category="org.jboss.ide.eclipse.as.openshift.express.ui.wizard.category"
			class="org.jboss.tools.openshift.express.internal.ui.wizard.application.NewOpenShiftApplicationWizard"
			icon="icons/openshift-logo-white-icon.png"
			id="org.jboss.ide.eclipse.as.openshift.express.ui.wizard.createNewApplicationWizard"
			name="OpenShift Application"
			project="true">
			<description>Create a new OpenShift Application</description>
		</wizard>
	</extension>

	<!-- jboss perspective: new openshift application wizard -->
	<extension
		point="org.eclipse.ui.perspectiveExtensions">
		<perspectiveExtension
			targetID="org.jboss.tools.common.ui.JBossPerspective">
			<newWizardShortcut
				id="org.jboss.ide.eclipse.as.openshift.express.ui.wizard.createNewApplicationWizard">
			</newWizardShortcut>
		</perspectiveExtension>
	</extension>

	<!-- import wizard: import application -->
   <extension
          point="org.eclipse.ui.importWizards">
      <category
            id="org.jboss.tools.openshift.express.ui.wizard.importCategory"
            name="OpenShift">
      </category>
      <wizard
            category="org.jboss.tools.openshift.express.ui.wizard.importCategory"
            class="org.jboss.tools.openshift.express.internal.ui.wizard.application.ImportOpenShiftApplicationWizard"
            icon="icons/openshift-logo-white-icon.png"
            id="org.jboss.tools.openshift.express.ui.importExistingApplicationWizard"
            name="Existing OpenShift Application">
            <description>Import an existing OpenShift Application</description>
      </wizard>
    </extension>  
	
	<extension
		point="org.eclipse.wst.server.ui.serverImages">
		<image
			icon="$nl$/icons/openshift-logo-white-icon.png"
			typeIds="org.jboss.tools.openshift.express.openshift.server.type,org.jboss.tools.openshift.express.internal.OpenShiftRuntime"
			id="org.jboss.ide.eclipse.as.ui.jbossIcon"/>
	</extension>
    
	<!-- servers view context menu: OpenShift submenu-->
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.eclipse.wst.server.ui.ServersView?after=org.eclipse.wst.server.ui.internal.cnf.topSectionEnd">
			<menu
				id="org.jboss.tools.openshift.express.serverviewer.openshift"
				label="%openshift.menu.openshift">
				<separator
					name="group.showIn" visible="true"/>
				<separator
					name="group.modify" visible="true"/>
				<separator
					name="additions" visible="true"/>
				<separator
					name="group.edit" visible="true"/>
				<separator
					name="group.project" visible="true"/>
				<separator
					name="group.properties" visible="true"/>
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false">
								<test
					               forcePluginActivation="true"
					               property="org.jboss.tools.openshift.express.isOpenShiftServer" 
					               value="true">
								</test>
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</menu>
		</menuContribution>
	</extension>	

	<extension
		point="org.eclipse.wst.server.ui.editorPageSections">
		<section
			class="org.jboss.tools.openshift.express.internal.ui.server.OpenShiftServerEditorSection"
			id="org.jboss.tools.openshift.express.ui.behaviour.details.section"
			insertionId="org.eclipse.wst.server.editor.overview.left"
			order="10"
			typeIds="org.jboss.tools.openshift.express.openshift.server.type">
		</section>
	</extension>
	<extension
			point="org.eclipse.wst.server.ui.wizardFragments">
		<fragment
			class="org.jboss.tools.openshift.express.internal.ui.server.OpenShiftServerWizardFragment"
			id="org.jboss.tools.openshift.express.ui.server.fragment"
			typeIds="org.jboss.tools.openshift.express.openshift.server.type">
		</fragment>
	</extension>
    
	<!-- openshift tail files console -->
    <extension
          point="org.eclipse.ui.console.consolePageParticipants">
       <consolePageParticipant
             class="org.jboss.tools.openshift.express.internal.ui.console.TailConsolePageParticipant"
             id="org.jboss.tools.openshift.express.ui.action.tailConsolePageParticipant">
          <enablement>
          		<and>
		         <instanceof
		               value="org.eclipse.ui.console.MessageConsole">
		         </instanceof>
		         <test
		               forcePluginActivation="true"
		               property="org.jboss.tools.openshift.express.isOpenShiftConsole">
		         </test>
		      </and>
          </enablement>
       </consolePageParticipant>
    </extension>
    
    <extension  point="org.eclipse.ui.editors.templates">    
        <template id="org.jboss.tools.maven.editor.xml.templates.profiles.openshift"
         contextTypeId="org.eclipse.m2e.editor.xml.templates.contextType.profiles"
         name="OpenShift profile" 
         description="OpenShift profile">
         <pattern>             &lt;profile&gt;
  &lt;!-- When built in OpenShift the &#39;openshift&#39; profile will be used when invoking mvn. --&gt;
  &lt;!-- Use this profile for any OpenShift specific customization your app will need. --&gt;
  &lt;!-- By default that is to put the resulting archive into the &#39;deployments&#39; folder. --&gt;
  &lt;!-- http://maven.apache.org/guides/mini/guide-building-for-different-environments.html --&gt;
  &lt;id&gt;openshift&lt;/id&gt;
    &lt;build&gt;
      &lt;plugins&gt;
        &lt;plugin&gt;
          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
          &lt;version&gt;2.4&lt;/version&gt;
          &lt;configuration&gt;
            &lt;outputDirectory&gt;deployments&lt;/outputDirectory&gt;
            &lt;warName&gt;ROOT&lt;/warName&gt;
          &lt;/configuration&gt;
        &lt;/plugin&gt;
      &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/profile&gt;</pattern>
       </template>
    </extension>
    
    <!-- openshift explorer: contexts -->
	<extension point="org.eclipse.ui.contexts">
    	<context id="org.jboss.tools.openshift.explorer.context.application" name="OpenShift Explorer Application Context" parentId="org.eclipse.ui.contexts.window" />
    	<context id="org.jboss.tools.openshift.explorer.context.domain" name="OpenShift Explorer Domain Context" parentId="org.eclipse.ui.contexts.window" />
    	<context id="org.jboss.tools.openshift.explorer.context.connection" name="OpenShift Explorer Connection Context" parentId="org.eclipse.ui.contexts.window" />
	</extension>
	
	<!-- OpenShift Explorer view: content -->
	<extension
		point="org.eclipse.ui.navigator.viewer">
			<viewerContentBinding
				viewerId="org.jboss.tools.openshift.express.ui.explorer.expressConsoleView">
				<includes>
				<contentExtension
					isRoot="true"
					pattern="org.jboss.tools.openshift.express.ui.explorer.navigatorContent">
				</contentExtension>
			</includes>
		</viewerContentBinding>
	</extension>
	<extension
		point="org.eclipse.ui.navigator.navigatorContent">
		<navigatorContent
			id="org.jboss.tools.openshift.express.ui.explorer.navigatorContent"
			contentProvider="org.jboss.tools.openshift.express.internal.ui.explorer.ExpressExplorerContentProvider"
			labelProvider="org.jboss.tools.openshift.express.internal.ui.explorer.ExpressExplorerLabelProvider"
			name="OpenShift Explorer Express Content">
			<triggerPoints>
				<instanceof
					value="org.jboss.tools.openshift.express.internal.core.connection.ExpressConnection" />
			</triggerPoints>
			<possibleChildren>
				<or>
					<instanceof
						value="com.openshift.client.IApplication" />
					<instanceof
						value="com.openshift.client.IDomain" />
				</or>
			</possibleChildren>
		</navigatorContent>
	</extension>

	<!-- Select Application Dialog common navigator -->
	<extension point="org.eclipse.ui.navigator.viewer">
		<viewer
			viewerId="org.jboss.tools.openshift.express.internal.ui.wizard.application.SelectApplicationWizardPage">
		</viewer>
		<viewerContentBinding
				viewerId="org.jboss.tools.openshift.express.internal.ui.wizard.application.SelectApplicationWizardPage">
			<includes>
				<contentExtension
					pattern="org.jboss.tools.openshift.express.internal.ui.wizard.application.SelectApplicationWizardPageContent"
					isRoot="false">
				</contentExtension>
			</includes>
		</viewerContentBinding>
	</extension>
	<extension point="org.eclipse.ui.navigator.navigatorContent">
		<navigatorContent
			id="org.jboss.tools.openshift.express.internal.ui.wizard.application.SelectApplicationWizardPageContent"
			name="Select Application Dialog Content"
			contentProvider="org.jboss.tools.openshift.express.internal.ui.explorer.ExpressExplorerContentProvider"
			labelProvider="org.jboss.tools.openshift.express.internal.ui.explorer.ExpressExplorerLabelProvider">
			<triggerPoints></triggerPoints>
		</navigatorContent>
	</extension>

	<!-- openshift explorer: "New" submenu -->
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.new">
	    	<menu
	           id="org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.new"
	           label="%openshift.menu.expressConsoleView.new">
			</menu>
		</menuContribution>
	</extension>

	<!-- openshift explorer: "Snapshot" submenu -->
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?before=additions">
	    	<menu
	           id="org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.snapshot"
	           label="%openshift.menu.expressConsoleView.snapshot">
			</menu>
		</menuContribution>
	</extension>

	<!-- servers view: "Snapshot" submenu -->
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=additions">
	    	<menu
	           id="org.jboss.tools.openshift.express.serverviewer.openshift.snapshot"
	           label="%openshift.menu.expressConsoleView.snapshot">
			</menu>
		</menuContribution>
	</extension>

	<!-- openshift explorer: "Show In" submenu -->
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.showIn">
	    	<menu
	           id="org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.showIn"
	           label="%openshift.menu.expressConsoleView.showIn">
			</menu>
		</menuContribution>
	</extension>
	
	<!-- Refresh OpenShift resource (connection, domain, application) -->
     <extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.refreshresource"
              name="%openshift.command.refreshresource">
        </command>
     </extension>
     <extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.refreshresource"
              class="org.jboss.tools.openshift.express.internal.ui.command.RefreshResourceHandler">
     	</handler>
     </extension>
     <extension
           point="org.eclipse.ui.menus">
        <menuContribution
              locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.modify">
          <command
                commandId="org.jboss.tools.openshift.express.ui.command.refreshresource"
                icon="icons/refresh.gif"
                id="org.jboss.tools.openshift.express.ui.command.refreshresource"
                mnemonic="R">
			<visibleWhen>
				<and>
	                <count
						value="1">
	                </count>
	                <iterate
						ifEmpty="false"
						operator="and">
			              <or>
			                 <instanceof
			                       value="org.jboss.tools.openshift.express.internal.core.connection.ExpressConnection" />
			                 <instanceof
			                       value="com.openshift.client.IOpenShiftResource" />
                    <instanceof
                          value="com.openshift.internal.kube.Resource">
                    </instanceof>
                    <instanceof
                          value="org.jboss.tools.openshift.core.IConnection">
                    </instanceof>
			              </or>
	                </iterate>
				</and>
			</visibleWhen>
          </command>
        </menuContribution>
    </extension>
    
    <!-- restart application -->
	<extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.restartApplication"
              name="%openshift.command.application.restart">
        </command>
     </extension>
     <extension
           point="org.eclipse.ui.handlers">
        <handler
			class="org.jboss.tools.openshift.express.internal.ui.command.RestartApplicationHandler"
			commandId="org.jboss.tools.openshift.express.ui.command.restartApplication">
		</handler>
	</extension>
	<!-- openshift explorer: restart application -->
    <extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.restartApplication"
				icon="icons/arrow_rotate_clockwise_red.png"
				id="org.jboss.tools.openshift.express.ui.command.restartApplication"
				mnemonic="R">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
		<!-- servers view: restart application -->
		<menuContribution
       		locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.restartApplication"
				icon="icons/arrow_rotate_clockwise_red.png"
				id="org.jboss.tools.openshift.express.ui.command.restartApplication"
				mnemonic="C">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
        	</command>
		</menuContribution>
	</extension>

	<!-- start application -->
	<extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.startApplication"
              name="%openshift.command.application.start">
        </command>
     </extension>
     <extension
           point="org.eclipse.ui.handlers">
        <handler
			class="org.jboss.tools.openshift.express.internal.ui.command.StartApplicationHandler"
			commandId="org.jboss.tools.openshift.express.ui.command.startApplication">
		</handler>
	</extension>
	<!-- openshift explorer: start application -->
    <extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.startApplication"
				icon="icons/lrun_obj.gif"
				id="org.jboss.tools.openshift.express.ui.command.startApplication"
				mnemonic="S">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
		<!-- servers view: start application -->
		<menuContribution
       		locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.startApplication"
				icon="icons/lrun_obj.gif"
				id="org.jboss.tools.openshift.express.ui.command.startApplication"
				mnemonic="S">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
        	</command>
		</menuContribution>
	</extension>
	
	<!-- stop application -->
	<extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.stopApplication"
              name="%openshift.command.application.stop">
        </command>
     </extension>
     <extension
           point="org.eclipse.ui.handlers">
        <handler
			class="org.jboss.tools.openshift.express.internal.ui.command.StopApplicationHandler"
			commandId="org.jboss.tools.openshift.express.ui.command.stopApplication">
		</handler>
	</extension>
	<!-- openshift explorer: stop application -->
    <extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.stopApplication"
				icon="icons/terminatedlaunch_obj.gif"
				id="org.jboss.tools.openshift.express.ui.command.stopApplication"
				mnemonic="T">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
		<!-- servers view: stop application -->
		<menuContribution
       		locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.stopApplication"
				icon="icons/terminatedlaunch_obj.gif"
				id="org.jboss.tools.openshift.express.ui.command.stopApplication"
				mnemonic="S">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
        	</command>
		</menuContribution>
	</extension>
	
	<!-- manage keys -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.manageKeys"
			name="%openshift.command.managekeys">
        </command>
     </extension>
     <extension
			point="org.eclipse.ui.handlers">
        <handler
			class="org.jboss.tools.openshift.express.internal.ui.command.ManageSSHKeysHandler"
			commandId="org.jboss.tools.openshift.express.ui.command.manageKeys">
        </handler>
     </extension>
	<!-- openshift explorer: manage keys -->
    <extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.showIn">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.manageKeys"
                icon="icons/key-icon.png"
                id="org.jboss.tools.openshift.express.ui.command.manageKeys"
                mnemonic="K">
              <visibleWhen>
				<with variable="selection">
					<and>
						<count value="1" />
	         			<iterate ifEmpty="false" operator="or">
	            			<instanceof
	                       		value="org.jboss.tools.openshift.express.internal.core.connection.ExpressConnection" />
	                    </iterate>
					</and>
                </with>
              </visibleWhen>
          </command>
        </menuContribution>
	</extension>
	
    <!-- Manage domains -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.manageDomains"
			name="%openshift.command.domain.manage">
		</command>
	</extension>
	<extension
           point="org.eclipse.ui.handlers">
        <handler
              class="org.jboss.tools.openshift.express.internal.ui.command.ManageDomainsHandler"
              commandId="org.jboss.tools.openshift.express.ui.command.manageDomains">
     	</handler>
	</extension>
	<!-- openshift explorer: manage domains -->
	<extension
           point="org.eclipse.ui.menus">
        <menuContribution
              locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.showIn">
          <command
                commandId="org.jboss.tools.openshift.express.ui.command.manageDomains"
                icon="icons/globe.png"
                mnemonic="M">
              <visibleWhen>
				<with variable="selection">
					<and>
						<count value="1" />
	         			<iterate ifEmpty="false" operator="or">
	            			<instanceof
	                       		value="org.jboss.tools.openshift.express.internal.core.connection.ExpressConnection" />
	                    </iterate>
					</and>
                </with>
              </visibleWhen>
          </command>
        </menuContribution>
	</extension>
	
	<!-- New Domain -->
	<extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.newdomain"
              class="org.jboss.tools.openshift.express.internal.ui.command.NewDomainHandler">
     	</handler>
	</extension>
	<!-- openshift explorer: new domain -->
	<extension
           point="org.eclipse.ui.menus">
        <menuContribution
				locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.new?after=additions">
			<command
                commandId="org.jboss.tools.openshift.express.ui.command.newdomain"
                icon="icons/globe_new.png"
                id="org.jboss.tools.openshift.express.ui.command.newdomain"
                mnemonic="D">
				<visibleWhen>
					<reference
						definitionId="org.tools.openshift.express.ui.isOpenShiftResourceSelected">
                    </reference>
				</visibleWhen>
			</command>
        </menuContribution>
	</extension>

	<!-- Edit Domain -->
	<extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.editdomain"
              name="%openshift.command.domain.edit">
        </command>
     </extension>
     <extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.editdomain"
              class="org.jboss.tools.openshift.express.internal.ui.command.EditDomainHandler">
     	</handler>
     </extension>
     <!-- openshift explorer: edit domain -->
     <extension
           point="org.eclipse.ui.menus">
        <menuContribution
              locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?before=group.modify">
          <command
                commandId="org.jboss.tools.openshift.express.ui.command.editdomain"
                icon="icons/globe_edit.png"
                id="org.jboss.tools.openshift.express.ui.command.editdomain"
                mnemonic="E">
           <visibleWhen>
             <with
                   variable="selection">
                <count
                      value="1">
                </count>
                <iterate
                      ifEmpty="false"
                      operator="and">
                 <instanceof
                       value="com.openshift.client.IDomain" />
                </iterate>
             </with>
           </visibleWhen>
          </command>
        </menuContribution>
    </extension>

	<!-- Delete Domain -->
	<extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.deletedomain"
              name="%openshift.command.domain.delete">
        </command>
	</extension>
	<extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.deletedomain"
              class="org.jboss.tools.openshift.express.internal.ui.command.DeleteDomainHandler">
     	</handler>
	</extension>
	<extension
		point="org.eclipse.ui.bindings">
		<key
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration" 
			contextId="org.jboss.tools.openshift.explorer.context.domain"
			sequence="Del" 
			commandId="org.jboss.tools.openshift.express.ui.command.deletedomain" />
	</extension>
	<!-- openshift explorer: delete domain -->
	<extension
           point="org.eclipse.ui.menus">
        <menuContribution
              locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?before=group.edit">
          <command
                commandId="org.jboss.tools.openshift.express.ui.command.deletedomain"
                icon="icons/globe_delete.png"
                id="org.jboss.tools.openshift.express.ui.command.deletedomain"
                mnemonic="D">
           <visibleWhen>
             <with
                   variable="selection">
                <count
                      value="1">
                </count>
                <iterate
                      ifEmpty="false"
                      operator="and">
                 <instanceof
                       value="com.openshift.client.IDomain" />
                </iterate>
             </with>
           </visibleWhen>
          </command>
        </menuContribution>
    </extension>
    
    <!-- New Application -->
    <extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.newapplication"
              name="%openshift.command.application.new">
        </command>
    </extension>
    <extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.newapplication"
              class="org.jboss.tools.openshift.express.internal.ui.command.NewApplicationHandler">
     	</handler>
    </extension>
	<!-- openshift explorer: new application -->
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.new?after=additions">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.newapplication"
				icon="icons/query-new.gif"
				id="org.jboss.tools.openshift.express.ui.command.newapplication"
				mnemonic="A">
				<visibleWhen>
					<reference
						definitionId="org.tools.openshift.express.ui.isOpenShiftResourceSelected">
                    </reference>
				</visibleWhen>
			</command>
		</menuContribution>
    </extension>

    <!-- Import Application -->
    <extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.importapplication"
              name="%openshift.command.application.import">
        </command>
    </extension>
    <extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.importapplication"
              class="org.jboss.tools.openshift.express.internal.ui.command.ImportApplicationHandler">
     	</handler>
    </extension>
	<!-- openshift explorer: import application -->
    <extension
           point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.import">
				<command
                	commandId="org.jboss.tools.openshift.express.ui.command.importapplication"
                	icon="icons/application_import.gif"
                	id="org.jboss.tools.openshift.express.ui.command.importapplication"
                	mnemonic="A">
					<visibleWhen>
						<with
							variable="selection">
							<count value="1"/>
							<iterate
								ifEmpty="false"
								operator="and">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</with>
					</visibleWhen>
			</command>
		</menuContribution>
	</extension>
	
	<!-- Delete Application(s) -->
	<extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.deleteApplications"
              name="%openshift.command.application.delete">
        </command>
	</extension>
	<extension
		point="org.eclipse.ui.bindings">
		<key
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration" 
			contextId="org.jboss.tools.openshift.explorer.context.application"
			sequence="Del" 
			commandId="org.jboss.tools.openshift.express.ui.command.deleteApplications" />
	</extension>
	<extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.deleteApplications"
              class="org.jboss.tools.openshift.express.internal.ui.command.DeleteApplicationHandler">
     	</handler>
	</extension>
	
	<!-- openshift explorer: delete application -->
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.edit">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.deleteApplications"
				icon="icons/application_delete.gif"
				id="org.jboss.tools.openshift.express.ui.command.deleteApplications"
				mnemonic="D">
				<visibleWhen>
					<with
					variable="selection">
						<iterate
							ifEmpty="false"
							operator="or">
							<instanceof
								value="com.openshift.client.IApplication" />
						</iterate>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
    </extension>

    <!-- servers view: delete application -->
    <extension
           point="org.eclipse.ui.menus">
        <menuContribution
              locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.edit">
          <command
                commandId="org.jboss.tools.openshift.express.ui.command.deleteApplications"
                icon="icons/application_delete.gif"
                id="org.jboss.tools.openshift.express.ui.command.deleteapplication"
                mnemonic="D">
          </command>
        </menuContribution>
	</extension>
    
	<!-- Open In Browser -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.openInBrowser"
			name="%openshift.command.application.openInBrowser">
		</command>
	</extension>
	<extension
		point="org.eclipse.ui.handlers">
		<handler
              commandId="org.jboss.tools.openshift.express.ui.command.openInBrowser"
              class="org.jboss.tools.openshift.express.internal.ui.command.OpenInWebBrowserHandler">
    	</handler>
	</extension>
	<extension
		point="org.eclipse.ui.menus">
		<!-- openshift explorer: open in browser -->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.showIn">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.openInBrowser"
				icon="icons/open-browser.gif"
				id="org.jboss.tools.openshift.express.ui.explorer.command.openInBrowser"
				mnemonic="B">
				<visibleWhen>
					<with
						variable="selection">
						<and>
							<count
								value="1">
							</count>
			                <iterate
								ifEmpty="false"
								operator="or">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
        </menuContribution>
    </extension>
    
    <!-- Edit embedded cartridges -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.editcartridges"
			name="%openshift.command.application.editcartridges">
		</command>
	</extension>
	<extension
		point="org.eclipse.ui.handlers">
		<handler
              commandId="org.jboss.tools.openshift.express.ui.command.editcartridges"
              class="org.jboss.tools.openshift.express.internal.ui.command.EditCartridgesHandler">
    	</handler>
	</extension>
     <extension
           point="org.eclipse.ui.menus">
		<!-- openshift explorer: edit embedded cartridges -->
        <menuContribution
              locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.modify">
          <command
                commandId="org.jboss.tools.openshift.express.ui.command.editcartridges"
                icon="icons/cartridges-edit.gif"
                id="org.jboss.tools.openshift.express.ui.command.editcartridges"
                mnemonic="C">
           <visibleWhen>
             <with
                   variable="selection">
				<or>
					<and>
		                <count
							value="1">
		                </count>
		                <iterate
							ifEmpty="false"
							operator="and">
							<instanceof
								value="com.openshift.client.IApplication" />
		                </iterate>
		            </and>
					<and>
		                <count
							value="+">
		                </count>
		                <iterate
							ifEmpty="false"
							operator="and">
							<instanceof
								value="com.openshift.client.cartridge.IEmbeddedCartridge" />
						</iterate>
					</and>
                </or>
             </with>
           </visibleWhen>
          </command>
        </menuContribution>
		<!-- servers view: edit embedded cartridges -->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.editcartridges"
				icon="icons/cartridges-edit.gif"
				id="org.jboss.tools.openshift.express.ui.command.editcartridges"
				mnemonic="C">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
    </extension>
     
    <!-- Edit environment variables -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.editEnvitonmentVars"
			name="%openshift.command.application.envvars">
		</command>
	</extension>
	<extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.editEnvitonmentVars"
              class="org.jboss.tools.openshift.express.internal.ui.command.EditEnvironmentVariablesHandler">
     	</handler>
	</extension>
	<!-- openshift explorer: edit environment variables -->
	<extension
           point="org.eclipse.ui.menus">
        <menuContribution
              locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.modify">
          <command
                commandId="org.jboss.tools.openshift.express.ui.command.editEnvitonmentVars"
                icon="icons/task_edit.gif"
                id="org.jboss.tools.openshift.express.ui.command.editEnvironmentVars"
                mnemonic="E">
           <visibleWhen>
             <with
                   variable="selection">
				<or>
					<and>
		                <count
							value="1">
		                </count>
		                <iterate
							ifEmpty="false"
							operator="and">
							<instanceof
								value="com.openshift.client.IApplication" />
		                </iterate>
		            </and>
                </or>
             </with>
           </visibleWhen>
          </command>
        </menuContribution>
		<!-- servers view: edit environment variables-->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.editEnvitonmentVars"
				icon="icons/task_edit.gif"
				id="org.jboss.tools.openshift.express.ui.command.editEnvironmentVars"
				mnemonic="E">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
	</extension>

	<!-- show environment variables -->
    <extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.listAllEnvironmentVariables"
              name="%openshift.command.application.listAllEnvironmentVariables">
        </command>
    </extension>
    <extension
           point="org.eclipse.ui.handlers">
        <handler
              class="org.jboss.tools.openshift.express.internal.ui.command.ListAllEnvironmentVariablesHandler"
              commandId="org.jboss.tools.openshift.express.ui.command.listAllEnvironmentVariables">
        </handler>
    </extension>
	<!-- openshift explorer: show environment variables -->
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.listAllEnvironmentVariables"
				icon="icons/task.gif"
				id="org.jboss.tools.openshift.express.ui.command.listAllEnvironmentVariables"
				mnemonic="E">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
		<!-- servers view: show environment variables -->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.listAllEnvironmentVariables"
				icon="icons/task.gif"
				id="org.jboss.tools.openshift.express.ui.command.listAllEnvironmentVariables"
				mnemonic="E">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
	</extension>
	
    <!-- Tail files -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.tailfiles"
			name="%openshift.command.application.tailfiles">
		</command>
	</extension>
	<extension
		point="org.eclipse.ui.handlers">
		<handler
              commandId="org.jboss.tools.openshift.express.ui.command.tailfiles"
              class="org.jboss.tools.openshift.express.internal.ui.command.TailFilesHandler">
    	</handler>
	</extension>
	<extension
		point="org.eclipse.ui.menus">
		<!-- openshift explorer: tail files -->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.tailfiles"
				icon="icons/console_view.gif"
				id="org.jboss.tools.openshift.express.ui.explorer.command.tailfiles"
				mnemonic="T">
				<visibleWhen>
					<with
						variable="selection">
						<and>
							<count
								value="1">
							</count>
			                <iterate
								ifEmpty="false"
								operator="and">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
        </menuContribution>
		<!-- servers view: tail files -->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.tailfiles"
				icon="icons/console_view.gif"
				id="org.jboss.tools.openshift.express.ui.servers.command.tailfiles"
				mnemonic="T">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
    </extension>

    <!-- Port Forwarding -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.portforwarding"
			name="%openshift.command.application.portforwarding">
		</command>
	</extension>
	<extension
		point="org.eclipse.ui.handlers">
		<handler
              commandId="org.jboss.tools.openshift.express.ui.command.portforwarding"
              class="org.jboss.tools.openshift.express.internal.ui.command.PortForwardingHandler">
    	</handler>
	</extension>
	<extension
		point="org.eclipse.ui.menus">
		<!-- openshift explorer: port forwarding -->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.portforwarding"
				icon="icons/connector.png"
				id="org.jboss.tools.openshift.express.ui.explorer.command.portforwarding"
				mnemonic="P">
				<visibleWhen>
					<with
						variable="selection">
						<and>
							<count
								value="1">
							</count>
			                <iterate
								ifEmpty="false"
								operator="and">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
        </menuContribution>
		<!-- servers view: port forwarding -->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.modify">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.portforwarding"
				icon="icons/connector.png"
				id="org.jboss.tools.openshift.express.ui.servers.command.portforwarding"
				mnemonic="P">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
    </extension>

	<!-- Save Snapshot -->
    <extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.snapshot.save"
              name="%openshift.command.application.snapshot.save">
        </command>
    </extension>
    <extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.snapshot.save"
              class="org.jboss.tools.openshift.express.internal.ui.command.SaveSnapshotHandler">
     	</handler>
    </extension>
	<!-- openshift explorer: snapshot save -->
    <extension
           point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.snapshot">
				<command
                	commandId="org.jboss.tools.openshift.express.ui.command.snapshot.save"
                	icon="icons/snapshot-save.png"
                	id="org.jboss.tools.openshift.express.ui.command..expressConsoleViewPopup.savesnapshot">
					<visibleWhen>
						<with
							variable="selection">
							<count value="1"/>
							<iterate
								ifEmpty="false"
								operator="and">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</with>
					</visibleWhen>
			</command>
		</menuContribution>
		<!-- servers view: save snapshot -->
		<menuContribution
       		locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift.snapshot">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.snapshot.save"
				icon="icons/snapshot-save.png"
				id="org.jboss.tools.openshift.express.ui.command.openshift.serverviewer.snapshot.savesnapshot"
				mnemonic="S">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
        	</command>
		</menuContribution>
	</extension>
	
	<!-- Restore Snapshot -->
    <extension
           point="org.eclipse.ui.commands">
        <command
              id="org.jboss.tools.openshift.express.ui.command.snapshot.restore"
              name="%openshift.command.application.snapshot.restore">
        </command>
	</extension>
	<extension
		point="org.eclipse.ui.handlers">
		<handler
			commandId="org.jboss.tools.openshift.express.ui.command.snapshot.restore"
			class="org.jboss.tools.openshift.express.internal.ui.command.RestoreSnapshotHandler">
		</handler>
	</extension>
	<!-- openshift explorer: snapshot restore -->
	<extension
           point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.snapshot">
				<command
                	commandId="org.jboss.tools.openshift.express.ui.command.snapshot.restore"
                	icon="icons/snapshot-restore.png"
                	id="org.jboss.tools.openshift.express.ui.command.expressConsoleViewPopup.restoresnapshot">
					<visibleWhen>
						<with
							variable="selection">
							<count value="1"/>
							<iterate
								ifEmpty="false"
								operator="and">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</with>
					</visibleWhen>
			</command>
		</menuContribution>
		<!-- servers view: save snapshot -->
		<menuContribution
       		locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift.snapshot">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.snapshot.restore"
				icon="icons/snapshot-restore.png"
				id="org.jboss.tools.openshift.express.ui.command.serverviewer.openshift.snapshot.restoresnapshot"
				mnemonic="R">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="or">
								<instanceof
									value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
        	</command>
		</menuContribution>
	</extension>
	
	<!-- application details -->
    <extension
          point="org.eclipse.ui.commands">
       <command
             id="org.jboss.tools.openshift.express.ui.command.applicationDetails"
             name="%openshift.command.application.details">
       </command>
    </extension>
    <extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.applicationDetails"
              class="org.jboss.tools.openshift.express.internal.ui.command.ApplicationDetailsHandler">
     	</handler>
    </extension>
	<!-- openshift explorer: application details -->
    <extension
           point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.properties">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.applicationDetails"
				icon="icons/magnifying-glass.png"
				id="org.jboss.tools.openshift.express.ui.command.applicationDetails"
				mnemonic="D">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="and">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
		<!-- servers view: application details -->
		<menuContribution
				locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.properties">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.applicationDetails"
				icon="icons/magnifying-glass.png"
				id="org.jboss.tools.openshift.express.ui.command.applicationDetails"
				mnemonic="D">
			<visibleWhen>
				<with variable="selection">
					<and>
						<count value="1" />
						<iterate ifEmpty="false" operator="or">
							<instanceof
								value="org.eclipse.wst.server.core.IServer" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
	</extension>
	
	<!-- domain, connection, cartridge properties -->
    <extension
          point="org.eclipse.ui.commands">
       <command
             id="org.jboss.tools.openshift.express.ui.command.showProperties"
             name="%openshift.command.resource.properties.show">
       </command>
    </extension>
    <extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.showProperties"
              class="org.jboss.tools.openshift.express.internal.ui.command.ShowPropertiesHandler">
     	</handler>
    </extension>
	<!-- openshift explorer: properties -->
    <extension
           point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleView.popup?after=group.properties">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.showProperties"
				id="org.jboss.tools.openshift.express.ui.command.showProperties"
				mnemonic="P">
				<visibleWhen>
					<with
						variable="selection">
							<count
								value="1" />
						<iterate
							ifEmpty="false"
							operator="and">
							<or>
								<instanceof
									value="org.jboss.tools.openshift.express.internal.core.connection.ExpressConnection" />
								<instanceof
									value="com.openshift.client.IDomain" />
								<instanceof
									value="com.openshift.client.cartridge.IEmbeddedCartridge" />
							</or>
						</iterate>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
	</extension>

	<!-- New Server Adapter -->
    <extension
          point="org.eclipse.ui.commands">
       <command
             id="org.jboss.tools.openshift.express.ui.command.newServerAdapter"
             name="%openshift.command.application.serverAdapter.new">
       </command>
    </extension>
    <extension
           point="org.eclipse.ui.handlers">
        <handler
              commandId="org.jboss.tools.openshift.express.ui.command.newServerAdapter"
              class="org.jboss.tools.openshift.express.internal.ui.command.NewServerAdapterHandler">
     	</handler>
    </extension>
	<!-- openshift explorer: new server adapter -->
    <extension
           point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.new">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.newServerAdapter"
				icon="icons/server_new.png"
				id="org.jboss.tools.openshift.express.ui.command.newServerAdapter"
				mnemonic="D">
				<visibleWhen>
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false" operator="and">
								<instanceof
									value="com.openshift.client.IApplication" />
							</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
	</extension>
	
	<!-- configure markers -->
	<extension
		point="org.eclipse.ui.commands">
		<command
			id="org.jboss.tools.openshift.express.ui.command.configureMarkers"
			name="%openshift.command.configureMarkers">
		</command>
	</extension>
	<extension
		point="org.eclipse.ui.handlers">
		<handler
			class="org.jboss.tools.openshift.express.internal.ui.command.ConfigureMarkersHandler"
			commandId="org.jboss.tools.openshift.express.ui.command.configureMarkers">
		</handler>
	</extension>

	<extension point="org.eclipse.ui.menus">
		<!-- server adapter: configure markers -->
		<menuContribution
       		locationURI="popup:org.jboss.tools.openshift.express.serverviewer.openshift?after=group.project">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.configureMarkers"
		    	icon="icons/marker16.png"
				id="org.jboss.tools.openshift.express.ui.command.configureMarkers"
				mnemonic="K">
        	</command>
		</menuContribution>

		<!-- project explorer: configure markers -->
		<menuContribution
    		locationURI="popup:org.eclipse.ui.navigator.ProjectExplorer#PopupMenu?after=additions">
    		<menu
				id="org.jboss.tools.openshift.express.ui.projectExplorerPopup"
				label="%openshift.menu.openshift">
				<visibleWhen 
					checkEnabled="false">
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false">
								<test
			       					forcePluginActivation="true"
			       					property="org.jboss.tools.openshift.express.isOpenShiftProject" value="true"/>
			        		</iterate>
						</and>
					</with>
				</visibleWhen>
			</menu>
		</menuContribution>
    	<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.projectExplorerPopup"> 
			<command
			    commandId="org.jboss.tools.openshift.express.ui.command.configureMarkers"
				icon="icons/marker16.png"
				id="org.jboss.tools.openshift.express.ui.command.configureMarkers"
				mnemonic="M">
			</command>
		</menuContribution>

		<!-- package explorer: configure markers -->
		<menuContribution
	   		locationURI="popup:org.eclipse.jdt.ui.PackageExplorer?after=additions">
	   		<menu
			    id="org.jboss.tools.openshift.express.ui.packageExplorerPopup"
	    	    label="%openshift.menu.openshift">
	    	    <visibleWhen 
					checkEnabled="false">
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false">
								<adapt
        	      					type="org.eclipse.core.resources.IProject">
			 						<test
		 								forcePluginActivation="true"
					   					property="org.jboss.tools.openshift.express.isOpenShiftProject" value="true"/>
								</adapt>
			        		</iterate>
						</and>
					</with>
				</visibleWhen>
			</menu>
		</menuContribution>
    	<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.packageExplorerPopup"> 
			<command
			    commandId="org.jboss.tools.openshift.express.ui.command.configureMarkers"
		    	icon="icons/marker16.png"
		    	id="org.jboss.tools.openshift.express.ui.command.configureMarkers"
		    	mnemonic="M">
			</command>
		</menuContribution>
		<!-- resource navigator: configure markers -->
		<menuContribution
			locationURI="popup:org.eclipse.ui.views.ResourceNavigator">
			<menu
				id="org.jboss.tools.openshift.express.ui.resourceNavigatorPopup"
	        	label="%openshift.menu.openshift">
				<visibleWhen 
					checkEnabled="false">
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false">
								<adapt
            						type="org.eclipse.core.resources.IProject">
		 							<test
		 								forcePluginActivation="true"
			    	       				property="org.jboss.tools.openshift.express.isOpenShiftProject" value="true"/>
								</adapt>
			           		</iterate>
						</and>
					</with>
				</visibleWhen>
			</menu>
		</menuContribution>
    	<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.resourceNavigatorPopup"> 
			<command
			    commandId="org.jboss.tools.openshift.express.ui.command.configureMarkers"
			    icon="icons/marker16.png"
			    id="org.jboss.tools.openshift.express.ui.command.configureMarkers"
			    mnemonic="M">
			</command>
		</menuContribution>
	</extension>

	<!-- configure OpenShift application -->
	<!-- project explorer: configure OpenShift application -->
	<extension point="org.eclipse.ui.menus">
		<menuContribution
    		locationURI="popup:org.eclipse.ui.projectConfigure?after=additions">
			<command
				commandId="org.jboss.tools.openshift.express.ui.command.newapplication"
				icon="icons/openshift-new.png"
				label="%openshift.menu.configureNewOpenShiftApplication"
				id="org.jboss.tools.openshift.express.ui.command.newapplication"
				mnemonic="A">
				<visibleWhen 
					checkEnabled="false">
					<with variable="selection">
						<and>
							<count value="1" />
							<iterate ifEmpty="false">
								<adapt
            						type="org.eclipse.core.resources.IProject">
									<and>
			 							<test
			 								forcePluginActivation="true"
				    	       				property="org.jboss.tools.openshift.express.isOpenShiftProject" value="false"/>			 							
				    	       			<test
			 								forcePluginActivation="true"
				    	       				property="org.jboss.tools.openshift.express.ifSharedIsEGit" value="true"/>
				    	       			<test
			 								forcePluginActivation="true"
				    	       				property="org.jboss.tools.openshift.express.isInternalRSE" value="false"/>
				    	       		</and>
								</adapt>
			           		</iterate>
						</and>
					</with>
				</visibleWhen>
			</command>
		</menuContribution>
	</extension>
  
    <!-- adapters -->
     <extension
           point="org.eclipse.core.runtime.adapters">
        <factory
              adaptableType="org.jboss.tools.openshift.express.internal.core.connection.ExpressConnection"
              class="org.jboss.tools.openshift.express.internal.ui.property.ExpressPropertySourceAdapterFactory">
           <adapter
                 type="org.eclipse.ui.views.properties.IPropertySource">
           </adapter>
        </factory>
        <factory
              adaptableType="com.openshift.client.IApplication"
              class="org.jboss.tools.openshift.express.internal.ui.property.ExpressPropertySourceAdapterFactory">
           <adapter
                 type="org.eclipse.ui.views.properties.IPropertySource">
           </adapter>
        </factory>
        <factory
              adaptableType="com.openshift.client.cartridge.IEmbeddedCartridge"
              class="org.jboss.tools.openshift.express.internal.ui.property.ExpressPropertySourceAdapterFactory">
           <adapter
                 type="org.eclipse.ui.views.properties.IPropertySource">
           </adapter>
        </factory>
        <factory
              adaptableType="com.openshift.client.IDomain"
              class="org.jboss.tools.openshift.express.internal.ui.property.ExpressPropertySourceAdapterFactory">
           <adapter
                 type="org.eclipse.ui.views.properties.IPropertySource">
           </adapter>
        </factory>
        <factory
              adaptableType="com.openshift.client.IApplication"
              class="org.jboss.tools.openshift.express.internal.ui.filters.ActionFilterAdapterFactory">
           <adapter
                 type="org.eclipse.ui.IActionFilter">
           </adapter>
        </factory>
     </extension>
	
	<!-- property testers -->
	<extension
		point="org.eclipse.core.expressions.propertyTesters">
		<propertyTester
			class="org.jboss.tools.openshift.express.internal.ui.propertytester.ServerTypePropertyTester"
			id="org.jboss.tools.openshift.express.ui.serverTypePropertyTester"
			namespace="org.jboss.tools.openshift.express"
			properties="isOpenShiftServer"
			type="org.eclipse.wst.server.core.IServer">
		</propertyTester>
		<propertyTester
			class="org.jboss.tools.openshift.express.internal.ui.propertytester.ConsoleTypePropertyTester"
			id="org.jboss.tools.openshift.express.ui.consoleTypePropertyTester"
			namespace="org.jboss.tools.openshift.express"
			properties="isOpenShiftConsole"
			type="org.eclipse.ui.console.MessageConsole">
		</propertyTester>
		<propertyTester
			class="org.jboss.tools.openshift.express.internal.ui.propertytester.OpenShiftProjectPropertyTester"
			id="org.jboss.tools.openshift.express.ui.openshiftProjectPropertyTester"
			namespace="org.jboss.tools.openshift.express"
			properties="isOpenShiftProject"
			type="org.eclipse.core.resources.IProject">
		</propertyTester>
		<propertyTester
			class="org.jboss.tools.openshift.express.internal.ui.propertytester.ProjectPropertyTester"
			id="org.jboss.tools.openshift.express.ui.projectPropertyTester"
			namespace="org.jboss.tools.openshift.express"
			properties="ifSharedIsEGit,isInternalRSE"
			type="org.eclipse.core.resources.IProject">
		</propertyTester>
	</extension>
	
	<!-- definitions -->
	<extension
		point="org.eclipse.core.expressions.definitions">
		<definition
			id="org.tools.openshift.express.ui.isOpenShiftResourceSelected">
			<with variable="selection">
				<count
					value="1" />
				<iterate
					ifEmpty="false"
					operator="and">
					<or>
						<instanceof
							value="org.jboss.tools.openshift.express.internal.core.connection.ExpressConnection" />
						<instanceof
							value="com.openshift.client.IDomain" />
						<instanceof
							value="com.openshift.client.IApplication" />
						<instanceof
							value="com.openshift.client.cartridge.IEmbeddableCartridge" />
					</or>
				</iterate>
			</with>
		</definition>

	</extension>
	
	<!-- preferences page -->
	<extension
		point="org.eclipse.ui.preferencePages">
		<page
			class="org.jboss.tools.openshift.express.internal.ui.preferences.OpenShiftPreferencePage"
			id="org.jboss.tools.openshift.express.ui.preferences.OpenShiftPreferencePage"
			name="%openshift.preferences.page.title"
			category="org.jboss.tools.common.model.ui.MainPreferencePage">
		</page>
	</extension>
 <extension
       point="org.eclipse.ui.decorators">
    <decorator
          icon="icons/scaleable_overlay.png"
          id="org.jboss.tools.openshift.express.ui.scalabledecorator"
          label="Scalable Application"
          lightweight="true"
          location="TOP_RIGHT"
          state="true">
       <enablement>
          <and>
             <objectClass
                   name="com.openshift.client.IApplication">
             </objectClass>
             <objectState
                   name="applicationScale"
                   value="SCALE">
             </objectState>
          </and>

       </enablement>
    </decorator>
 </extension>
 <extension
       point="org.eclipse.ui.commands">
    <command
          id="org.jboss.tools.openshift.ui.command.newdeploymentconfig"
          name="%openshift.command.deploymentconfig.new">
    </command>
 </extension>
 <extension
       point="org.eclipse.ui.startup">
    <startup
          class="org.jboss.tools.openshift.express.internal.ui.ExpressUIActivator">
    </startup>
 </extension>
 <extension
       point="org.jboss.tools.openshift.common.ui.connectionUI">
    <connectionUI
          class="org.jboss.tools.openshift.express.internal.ui.wizard.connection.ExpressConnectionUI">
    </connectionUI>
 </extension>
</plugin>
